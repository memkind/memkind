.\" SPDX-License-Identifier: BSD-2-Clause
.\" Copyright (C) 2021 Intel Corporation.
.\"
.TH "MEMTIER" 7 "2021-03-01" "Intel Corporation" "MEMTIER" \" -*- nroff -*-
.SH "NAME"
libmemtier.so \- TODO
.SH "SYNOPSIS"
.BR LD_PRELOAD=libmemtier.so
command {arguments ...}
.SH "DESCRIPTION"
.B TODO

.SH "ENVIRONMENT"
.TP
.B MEMKIND_MEM_TIERING_CONFIG
Sets the memkind tiering functionality. Passed as a comma separated list of
.I memkind_tier
configuration strings. The configuration has to be passed in the following format:
"kind_name:path_to_pmem:pmem_file_size:ratio"
, where:
.IP
.BR
kind_name - the name of a kind used in tiering. Allowed kind names are 'DRAM' and 'FS_DAX'.
.IP
.BR
path_to_pmem - the path to the location where pmem file will be created. The path has to exist.
.IP
.BR
pmem_file_size - the size of pmem file, it's the maximum size of total allocations to PMEM.
The accepted formats are: 1, 1KB, 1MB, 1GB. Valid values of size are from zero to the maximum value of
.I size_t
.IP
.BR 
ratio - the part of ratio tied to the given kind. It's represented as an
.I unsigned
type. Valid values have to be greater than zero and no greater than
.I UINT_MAX
value. 
.RS
Example usage where 20% of allocations will go to PMEM and 80% of allocations will go to DRAM:
MEMKIND_MEM_TIERING_CONFIG="FS_DAX:/tmp/:10M:1,DRAM:4"
.RE
.IP
.BR
NOTE: The application will fail when provided environment variable string is not in a correct format.

.SH "EXAMPLES"
.br
The following will run /bin/ls with Memtier library. Make sure that paths to
both libmemtier.so and libmemkind.so are included in
.B LD_LIBRARY_PATH.
.IP
.B LD_PRELOAD=libmemtier.so
/bin/ls -l

.SH "COPYRIGHT"
Copyright (C) 2021 Intel Corporation. All rights reserved.

.SH "SEE ALSO"
.BR memkind(3)
.BR malloc (3)
