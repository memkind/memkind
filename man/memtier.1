.\" Automatically generated by Pandoc 2.5
.\"
.TH "MEMTIER" "1" "2022-08-10" "MEMTIER ver. 1.14.0+dev6+gcd4375cb" "MEMTIER | MEMKIND Programmer's Manual"
.hy
.\" SPDX-License-Identifier: BSD-2-Clause
.\" Copyright 2022, Intel Corporation
.SH NAME
.PP
\f[B]memtier\f[R] \- redirect malloc calls to memkind memory tiering
.SH SYNOPSIS
.IP
.nf
\f[C]
memtier [ \-r ratio ] [ \-t thresholds ] program args...
\f[R]
.fi
.SH DESCRIPTION
.TP
.B memtier
runs the given program, redirecting memory allocations to different
memory tiers based on a given policy.
This allows unmodified programs to run following a non\-greedy
allocation scheme that avoids a performance cliff when DRAM is
exhausted.
.SS OPTIONS
.TP
.B \-r ratio
Specifies the ratio as a pair of integers separated by a colon, where
the first number gives the relative share of near DRAM to be used while
the second number gives \[lq]far\[rq] memory, be it CXL memory or PMEM.
Eg.
\[lq]1:4\[rq] means that 20% of allocations will use DRAM, 80% PMEM.
.RS
.PP
If the ratio is not given, it defaults to the relative share of
physically installed memory.
.PP
This version of memtier recognizes only two tiers (DRAM and KMEM_DAX).
.RE
.TP
.B \-t thresholds
Turns on DYNAMIC_THRESHOLD mode where small allocations are served from
DRAM and large ones from far memory.
The syntax is described in depth in man libmemtier, eg.
\-t INIT_VAL=1024,MIN_VAL=512,MAX_VAL=65536 starts with a threshold of
1024, then varies it between 512..65536 attempting to match the
requested ratio.
.TP
.B \-v
Displays settings that are passed to libmemtier.
.TP
.B \-h
Shows a help message then exits.
.SS CEVEATS
.PP
This tool doesn\[cq]t expose all features of libmemtier.
Only DRAM and KMEM_DAX memory is supported, to use FS_DAX you need to
configure the library directly, please refer to its man page.
.PP
Or alternatively, you can switch that memory to KMEM_DAX mode.
For that purpose, please refer to \[lq]man
ndctl\-reconfigure\-namespace\[rq] and \[lq]man
daxctl\-reconfigure\-device\[rq].
.SS COPYRIGHT
.PP
Copyright (C) 2022 Intel Corporation.
All rights reserved.
.SS SEE ALSO
.PP
\f[B]libmemtier\f[R](7), \f[B]memkind\f[R](3), \f[B]malloc\f[R](3)
